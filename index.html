<script>
  // Who Wants To Be A Crypto Millionaire - Crypto Rebrand
  // Complete game script - February 2026 version

  const gameTitle = "Who Wants To Be A Crypto Millionaire";

  const prizes = [
    0.00001,   // Question 1
    0.00002,   // 2
    0.00005,   // 3
    0.0001,    // 4
    0.0005,    // 5  ← safe haven
    0.001,     // 6
    0.002,     // 7
    0.005,     // 8
    0.01,      // 9
    0.02,      // 10 ← safe haven
    0.05,      // 11
    0.1,       // 12
    0.25,      // 13
    0.5,       // 14
    1.0        // 15 – top prize = 1 BTC
  ];

  const questions = [
    {
      question: "In which year was the Bitcoin whitepaper published?",
      answers: ["2006", "2008", "2010", "2012"],
      correct: 1
    },
    {
      question: "What is the name of Bitcoin's pseudonymous creator?",
      answers: ["Vitalik Buterin", "Satoshi Nakamoto", "Hal Finney", "Adam Back"],
      correct: 1
    },
    {
      question: "What is the maximum supply of Bitcoin?",
      answers: ["18 million", "21 million", "25 million", "Unlimited"],
      correct: 1
    },
    {
      question: "Which consensus mechanism does Bitcoin use?",
      answers: ["Proof of Stake", "Proof of Work", "Proof of Authority", "Delegated Proof of Stake"],
      correct: 1
    },
    {
      question: "What is the smallest unit of Bitcoin called?",
      answers: ["Wei", "Satoshi", "Gwei", "Finney"],
      correct: 1
    },
    {
      question: "Which layer-2 scaling solution was most adopted for Bitcoin payments by 2025?",
      answers: ["Arbitrum", "Lightning Network", "Optimism", "Polygon"],
      correct: 1
    },
    {
      question: "What does HODL stand for in crypto culture?",
      answers: ["Hold On for Dear Life", "High On Digital Liquidity", "Hope Of Decentralized Ledger", "Hash On Distributed Ledger"],
      correct: 0
    },
    {
      question: "Which blockchain introduced the ERC-20 token standard?",
      answers: ["Bitcoin", "Ethereum", "Solana", "Binance Smart Chain"],
      correct: 1
    },
    {
      question: "What is the primary purpose of a hardware wallet?",
      answers: ["Fast trading", "Offline private key storage", "Yield farming", "Decentralized exchange"],
      correct: 1
    },
    {
      question: "Which event is known as 'Black Thursday' in crypto history?",
      answers: ["March 2020 crash", "May 2021 China ban", "November 2022 FTX collapse", "January 2018 peak"],
      correct: 0
    },
    {
      question: "What is the name of Ethereum's transition from PoW to PoS?",
      answers: ["The Flippening", "The Merge", "The Shanghai", "The Paris"],
      correct: 1
    },
    {
      question: "Which meme coin reached the highest market cap in early 2025?",
      answers: ["Shiba Inu", "Dogecoin", "Pepe", "Bonk"],
      correct: 2 // (adjust if your favorite meme is different)
    },
    {
      question: "What does DeFi stand for?",
      answers: ["Digital Finance", "Decentralized Finance", "Distributed Fiat", "Direct Exchange Finance"],
      correct: 1
    },
    {
      question: "Which protocol is most associated with liquid staking on Ethereum?",
      answers: ["Aave", "Lido", "Compound", "MakerDAO"],
      correct: 1
    },
    {
      question: "What is the current block reward for Bitcoin miners after the 2024 halving?",
      answers: ["3.125 BTC", "6.25 BTC", "1.5625 BTC", "12.5 BTC"],
      correct: 0
    }
  ];

  // Lifelines (renamed)
  const lifelines = {
    fiftyFifty: "Halving",
    askAudience: "Community Poll",
    phoneFriend: "DM a Whale"
  };

  // Game state
  let currentQuestion = 0;
  let currentPrize = 0;
  let safeHavens = [4, 9]; // 0-based indices for questions 5 and 10
  let lifelinesUsed = { fiftyFifty: false, askAudience: false, phoneFriend: false };
  let gameOver = false;
  let timerInterval;

  // DOM elements
  const questionEl = document.getElementById("question");
  const answersEl = document.getElementById("answers");
  const prizeLadderEl = document.getElementById("prize-ladder");
  const lifelineEls = {
    fiftyFifty: document.getElementById("lifeline-5050"),
    askAudience: document.getElementById("lifeline-audience"),
    phoneFriend: document.getElementById("lifeline-phone")
  };
  const timerEl = document.getElementById("timer");

  // Sounds (optional - you can keep or remove URLs)
  const sounds = {
    correct: new Audio("https://assets.millionaire-game.com/sounds/correct.mp3"),
    wrong: new Audio("https://assets.millionaire-game.com/sounds/wrong.mp3"),
    final: new Audio("https://assets.millionaire-game.com/sounds/final.mp3")
  };

  // Initialize prize ladder
  function initPrizeLadder() {
    prizeLadderEl.innerHTML = "";
    prizes.forEach((prize, index) => {
      const li = document.createElement("li");
      li.textContent = prize < 1 ? (prize * 100000000).toLocaleString() + " sats" : prize.toLocaleString() + " BTC";
      if (index === currentQuestion) li.classList.add("current");
      if (safeHavens.includes(index)) li.classList.add("safe");
      prizeLadderEl.appendChild(li);
    });
  }

  // Load question
  function loadQuestion() {
    if (gameOver || currentQuestion >= questions.length) return endGame(true);

    const q = questions[currentQuestion];
    questionEl.textContent = q.question;
    answersEl.innerHTML = "";

    q.answers.forEach((answer, index) => {
      const btn = document.createElement("button");
      btn.textContent = answer;
      btn.onclick = () => checkAnswer(index);
      answersEl.appendChild(btn);
    });

    updateLifelines();
    startTimer();
  }

  // Timer (30 seconds per question - optional)
  function startTimer() {
    let timeLeft = 30;
    timerEl.textContent = timeLeft;
    timerInterval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        wrongAnswer();
      }
    }, 1000);
  }

  // Check answer
  function checkAnswer(selected) {
    clearInterval(timerInterval);
    const correct = questions[currentQuestion].correct;

    if (selected === correct) {
      sounds.correct?.play();
      currentPrize = prizes[currentQuestion];
      highlightAnswer(selected, "correct");
      setTimeout(() => {
        currentQuestion++;
        loadQuestion();
      }, 1500);
    } else {
      sounds.wrong?.play();
      highlightAnswer(selected, "wrong");
      highlightAnswer(correct, "correct");
      setTimeout(() => endGame(false), 3000);
    }
  }

  // Highlight answer buttons
  function highlightAnswer(index, className) {
    const buttons = answersEl.querySelectorAll("button");
    buttons[index].classList.add(className);
  }

  // Wrong answer / game over
  function wrongAnswer() {
    endGame(false);
  }

  // End game
  function endGame(won) {
    gameOver = true;
    clearInterval(timerInterval);

    let message = won
      ? `Congratulations! You won ${currentPrize < 1 ? (currentPrize * 1e8).toLocaleString() + " sats" : currentPrize + " BTC"}!`
      : `Game Over. You won ${currentPrize < 1 ? (currentPrize * 1e8).toLocaleString() + " sats" : currentPrize + " BTC"}`;

    alert(message);
    // Optional: play final sound
    if (won) sounds.final?.play();
  }

  // Update lifeline buttons
  function updateLifelines() {
    Object.keys(lifelinesUsed).forEach(key => {
      const btn = lifelineEls[key];
      if (lifelinesUsed[key]) {
        btn.disabled = true;
        btn.style.opacity = "0.5";
      } else {
        btn.disabled = false;
        btn.style.opacity = "1";
      }
    });
  }

  // Lifeline handlers
  lifelineEls.fiftyFifty.onclick = () => {
    if (lifelinesUsed.fiftyFifty) return;
    lifelinesUsed.fiftyFifty = true;
    const correct = questions[currentQuestion].correct;
    const wrongAnswers = [0,1,2,3].filter(i => i !== correct);
    const remove = wrongAnswers.sort(() => Math.random() - 0.5).slice(0,2);

    const buttons = answersEl.querySelectorAll("button");
    remove.forEach(i => buttons[i].style.visibility = "hidden");
    updateLifelines();
  };

  lifelineEls.askAudience.onclick = () => {
    if (lifelinesUsed.askAudience) return;
    lifelinesUsed.askAudience = true;
    alert("Community Poll: The crowd votes 70% for " + questions[currentQuestion].answers[questions[currentQuestion].correct]);
    updateLifelines();
  };

  lifelineEls.phoneFriend.onclick = () => {
    if (lifelinesUsed.phoneFriend) return;
    lifelinesUsed.phoneFriend = true;
    alert("DM a Whale: Your whale friend says: 'I'm pretty sure it's " + questions[currentQuestion].answers[questions[currentQuestion].correct] + "'");
    updateLifelines();
  };

  // Start game
  initPrizeLadder();
  loadQuestion();

  // Optional restart button (add to HTML if desired)
  // document.getElementById("restart")?.addEventListener("click", () => location.reload());
</script>
